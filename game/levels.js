export default class Levels {
    level_width; //Altezza e larghezza dell livello (in tiles)
    level_height;
    tile_width; //Dimensione di ogni tile
    tile_height;
    tileMapImage //L'immagine da cui recuperare tutti i tile
    tileMapImgHeight; //Le dimensioni della mappa da cui recupero i tile
    tileMapImageWidth;
    terrain1 = [101,135,136,137,137,137,137,137,137,137,101,137,137,153,137,137,137,137,135,136,137,137,137,101,101,
        101,151,152,137,137,137,153,137,137,137,137,137,137,137,137,137,137,153,151,152,137,137,137,137,101,
        137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,
        153,137,137,153,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,
        137,137,137,137,137,137,137,137,153,137,153,137,137,135,136,137,137,101,137,137,137,137,137,137,137,
        137,137,137,135,136,137,137,137,137,135,136,137,137,151,152,137,101,101,137,137,137,137,137,137,137,
        137,137,137,151,152,137,137,137,137,151,152,137,137,137,137,137,137,137,137,137,137,137,153,137,137,
        137,137,137,137,137,101,101,135,136,137,137,137,101,137,137,137,137,153,137,135,136,137,137,137,137,
        135,136,137,153,135,136,101,151,152,137,137,137,101,101,137,137,137,137,137,151,152,137,137,137,101,
        151,152,137,137,151,152,137,137,137,153,137,137,137,137,137,101,137,137,153,137,137,137,137,137,101,
        137,101,137,137,137,137,137,137,137,137,153,137,137,137,101,101,137,137,137,137,137,137,137,137,137,
        137,101,101,137,137,137,137,137,137,137,137,137,137,137,137,137,137,101,137,137,137,101,137,137,137,
        137,137,137,135,136,137,137,137,137,137,137,137,137,137,135,136,137,137,137,137,137,137,135,136,137,
        137,137,137,151,152,137,153,137,137,137,137,137,137,137,151,152,137,137,137,137,137,137,151,152,137,
        137,137,137,137,137,137,137,137,137,137,135,136,137,137,137,101,137,137,137,137,101,137,137,137,101,
        137,137,137,137,137,137,137,137,137,137,151,152,137,137,137,101,137,137,137,137,137,137,137,137,137];
    
    obstacle = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,166,0,0,0,169,0,0,0,0,0,169,0,0,0,0,166,0,0,184,185,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,0,0,0,0,0,
        0,169,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,166,0,0,0,0,0,0,0,0,166,0,0,0,0,0,0,184,185,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,
        0,0,0,0,0,0,0,0,0,0,0,184,185,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,166,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,166,0,0,0,166,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,184,185,0,0,0,0,0,0,166,0,0,0,0,0,0,0,0,184,185,0,169,0,0,0,
        0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0] 
    constructor(level_width, level_height, tile_width, tile_height, tileMapsrc, tileMapImgHeight, tileMapImageWidth) {
        this.level_width = level_width;
        this.level_height = level_height;
        this.tile_width = tile_width;
        this.tile_height = tile_height;
        this.tileMapImage = new Image(this.width, this.height);
        this.tileMapImage.src = tileMapsrc;
        this.tileMapImgHeight = tileMapImgHeight;
        this.tileMapImageWidth = tileMapImageWidth;
    }

    draw(canvasContext) {
        //Disegno l'acqua
        for (let i = 0; i < this.terrein1.length; i++) {
            //Ottengo le coordinate sulla canvas
            let dx = (i % this.level_width) * 32;
            let dy = Math.floor(i / this.level_height) * 32;
            let tile = this.terrain[i];
            
            //Ottengo le coordinate sulla tilemap
            let sx = ((tile  % (this.tileMapImageWidth/32))-1) * 32; //Devo fare -1 perchè il primo tile è il n°1
            let sy = Math.floor(tile / (this.tileMapImgHeight/32)) * 32;


            if (this.terrain1[i] != 0) {
                canvasContext.drawImage(this.tileMapImage, sx, sy, this.tile_width, this.tile_height, dx, dy, this.tile_width, this.tile_height);
            }
        }
    }
}

